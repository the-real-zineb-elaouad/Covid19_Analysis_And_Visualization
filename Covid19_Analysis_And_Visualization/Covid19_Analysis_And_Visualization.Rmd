---
title: "projet"
output: html_document
date: "2025-04-08"
#runtime: shiny
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(ggplot2)
#library(gridExtra)
#library(scales)
#library(shiny)
```

To learn more, see [Interactive Documents](http://rmarkdown.rstudio.com/authoring_shiny.html).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

```{r}
CovidData <- read.csv("../data/owid-covid-data.csv", sep = ",")
CovidData %>% head(10)
```

```{r}
ListeLocation <- CovidData %>% select(location) %>% distinct()
ListeLocation
```

```{r}
continents <- c("Africa", "Asia", "Europe", "North America",
    "South America", "Oceania")

continents

```
```{r}
regions_agregats <- c(
    "World", "European Union (27)", 
    "High-income countries", "Low-income countries",
    "Lower-middle-income countries", "Upper-middle-income countries"
  )
regions_agregats
```

```{r}
territory_or_dependency <- c(
      "England", "Scotland", "Wales", "Northern Ireland", "Puerto Rico", 
      "Hong Kong", "Macao", "Greenland", "Guadeloupe", "Martinique", 
      "French Guiana", "French Polynesia", "Reunion", "Mayotte", "New Caledonia", 
      "Aruba", "Curacao", "Bonaire Sint Eustatius and Saba", "Gibraltar", 
      "Guernsey", "Jersey", "Isle of Man", "Faroe Islands", "Falkland Islands", 
      "Saint Martin (French part)", "Sint Maarten (Dutch part)", "Saint Barthelemy", 
      "Saint Pierre and Miquelon", "Cayman Islands", "Bermuda", "British Virgin Islands", 
      "United States Virgin Islands", "Turks and Caicos Islands", "Anguilla", 
      "Montserrat", "Cook Islands", "Tokelau", "Niue", "Pitcairn", "Western Sahara", 
      "Palestine", "Kosovo", "Northern Cyprus", "Taiwan", "Vatican", 
      "Micronesia (country)")

territory_or_dependency
```

```{r}
CovidData <- CovidData %>%
  mutate(type_location = case_when(
    location %in% continents ~ "continent",
    location %in% regions_agregats ~ "region_or_aggregate",
    location %in% territory_or_dependency ~ "territory_or_dependency",
    .default = "country"
  ))
CovidData
```

```{r}
CovidData %>% select(location, type_location) %>% distinct()
```


```{r}
CovidData %>% filter(location == 'France')
```

### Nettoyage des colonnes communes inutilisés

```{r}
CovidDataClean <- CovidData %>% select(-iso_code, -new_cases_smoothed,-new_deaths_smoothed, -new_cases_smoothed_per_million, -new_deaths_smoothed_per_million, -new_tests_smoothed, -new_tests_smoothed_per_thousand, -new_vaccinations_smoothed, -new_vaccinations_smoothed_per_million, -new_people_vaccinated_smoothed, -new_people_vaccinated_smoothed_per_hundred)

CovidDataClean
```


### 
```{r}
df_evolution_temporelle <- CovidDataClean %>% select(continent, location, date, total_cases, new_cases, total_deaths, total_cases_per_million, new_cases_per_million, total_deaths_per_million, new_deaths_per_million, reproduction_rate, stringency_index)

df_evolution_temporelle
```



















## -----------------------------------------------------------------  SALAH -------------------------------------------------------------


## -----------------------------------------------------------------  SIAKA -------------------------------------------------------------


## -----------------------------------------------------------------  ZINEB -------------------------------------------------------------


## -----------------------------------------------------------------  SADOU -------------------------------------------------------------


## -----------------------------------------------------------------  ALIOU -------------------------------------------------------------







## =============================================== FIN ================================================================


## Inputs and Outputs

You can embed Shiny inputs and outputs in your document. Outputs are automatically updated whenever inputs change.  This demonstrates how a standard R plot can be made interactive by wrapping it in the Shiny `renderPlot` function. The `selectInput` and `sliderInput` functions create the input widgets used to drive the plot.

```{r}
# Chargement des données OWID
Covid19 <- read_delim("./owid-covid-data.csv", delim = ",") %>%
  filter(location %in% c("France", "Germany", "Italy")) %>%
  filter(!is.na(total_cases), !is.na(total_deaths)) %>%
  mutate(date = as.Date(date))

 

```
```{r}
# Graphique 1 : Cas cumulés
p1 <- ggplot(Covid19, aes(x = date, y = total_cases, color = location)) +
  geom_line(size = 1) +
  scale_y_log10(labels = comma) +
  labs(title = "Cas cumulés (échelle logarithmique)", x = "Date", y = "Total cas", color = "Pays") +
  theme_minimal(base_size = 14)

# Graphique 2 : Décès cumulés
p2 <- ggplot(Covid19, aes(x = date, y = total_deaths, color = location)) +
  geom_line(size = 1) +
  scale_y_log10(labels = comma) +
  labs(title = "Décès cumulés (échelle logarithmique)", x = "Date", y = "Total décès", color = "Pays") +
  theme_minimal(base_size = 14)

# Afficher les deux côte à côte
grid.arrange(p1, p2, ncol = 2)



```
